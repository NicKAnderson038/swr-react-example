{"version":3,"sources":["App.js","services/useRequest.js","index.js"],"names":["fetcher","fetch","then","res","json","App","value","revalidateOnFocus","Crimes","data","query","Error","useSWR","error","useRequest","isUndefined","DisplayCrimes","crimes","categories","Set","map","crime","category","React","useState","filterCategory","setFilterCategory","filteredCrimes","filter","key","onClick","JSON","stringify","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"wPAOMA,G,MAAU,kBAAaC,MAAK,WAAL,aAAeC,MAAK,SAACC,GAAD,OAASA,EAAIC,YAE/C,SAASC,IACtB,OACE,kBAAC,IAAD,CAAWC,MAAO,CAAEC,mBAAmB,EAAOP,YAC5C,kBAACQ,EAAD,OAKN,SAASA,IACP,IACQC,ECdgB,SAACC,GACzB,IAAKA,EACH,MAAM,IAAIC,MAAM,oBAFiB,MAIXC,YAAO,GAAD,OANhB,sDAMgB,OAAcF,IAApCD,EAJ2B,EAI3BA,KAER,OANmC,EAIrBI,MAGL,2CAEJJ,EAIE,CAAEA,QAHA,6CDIQK,CADH,6CACNL,KAER,OACGM,sBAAYN,IACX,kBAACO,EAAD,CACEC,OAAQR,EACRS,WAAU,YAAM,IAAIC,IAAIV,EAAKW,KAAI,SAACC,GAAD,OAAWA,EAAMC,gBAM1D,SAASN,EAAT,GAAgD,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,WAAc,EACDK,IAAMC,SAAS,MADd,mBACtCC,EADsC,KACtBC,EADsB,KAEvCC,EAAiBF,EACnBR,EAAOW,QAAO,SAACP,GAAD,OAAWA,EAAMC,WAAaG,KAC5CR,EACJ,OACE,oCACGC,EAAWE,KAAI,SAACE,GAAD,OACd,4BAAQO,IAAKP,EAAUQ,QAAS,kBAAMJ,EAAkBJ,KACrDA,MAGJG,GACC,4BAAQK,QAAS,kBAAMJ,EAAkB,QAAzC,SAEF,6BAAMK,KAAKC,UAAUL,EAAgB,KAAM,IAT7C,KEhCJ,IAAMM,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACI,kBAACjC,EAAD,OAEJ4B,K","file":"static/js/main.c95cd4ab.chunk.js","sourcesContent":["import React from 'react'\nimport { SWRConfig } from 'swr'\nimport { isUndefined } from 'lodash'\nimport { useRequest } from './services/useRequest'\n\nimport './styles.css'\n\nconst fetcher = (...args) => fetch(...args).then((res) => res.json())\n\nexport default function App() {\n  return (\n    <SWRConfig value={{ revalidateOnFocus: false, fetcher }}>\n      <Crimes />\n    </SWRConfig>\n  )\n}\n\nfunction Crimes() {\n  const query = '?lat=52.629729&lng=-1.131592&date=2019-10'\n  const { data } = useRequest(query)\n\n  return (\n    !isUndefined(data) && (\n      <DisplayCrimes\n        crimes={data}\n        categories={[...new Set(data.map((crime) => crime.category))]}\n      />\n    )\n  )\n}\n\nfunction DisplayCrimes({ crimes, categories }) {\n  const [filterCategory, setFilterCategory] = React.useState(null)\n  const filteredCrimes = filterCategory\n    ? crimes.filter((crime) => crime.category === filterCategory)\n    : crimes\n  return (\n    <>\n      {categories.map((category) => (\n        <button key={category} onClick={() => setFilterCategory(category)}>\n          {category}\n        </button>\n      ))}\n      {filterCategory && (\n        <button onClick={() => setFilterCategory(null)}>reset</button>\n      )}\n      <pre>{JSON.stringify(filteredCrimes, null, 2)}</pre>;\n    </>\n  )\n}\n","import React from 'react'\nimport useSWR from 'swr'\n\nconst baseUrl = 'https://data.police.uk/api/crimes-street/all-crime'\n\nexport const useRequest = (query) => {\n  if (!query) {\n    throw new Error('Path is required')\n  }\n  const { data, error } = useSWR(`${baseUrl}${query}`)\n\n  if (error) {\n    return <div> Error... </div>\n  }\n  if (!data) {\n    return <div> Loading... </div>\n  }\n\n  return { data }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  rootElement\n)\n"],"sourceRoot":""}